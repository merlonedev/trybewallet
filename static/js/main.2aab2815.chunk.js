(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{23:function(e,t,a){e.exports=a.p+"static/media/trybe-logo.8b07e0b0.png"},34:function(e,t,a){e.exports=a(46)},39:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),l=a.n(c),i=a(18),o=(a(39),a(5)),s=a(3),u=a(17),d=a.n(u),m=a(22),p=a(15),h=a(9),b=a(10),E=a(4),v=a(12),f=a(11);function y(){return function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQUEST_CURRENCIES"}),e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,t({type:"RECEIVE_REQUEST",payload:n});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var g=a(23),O=a.n(g),C=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",redirect:!1},n.handleChange=n.handleChange.bind(Object(E.a)(n)),n.authenticator=n.authenticator.bind(Object(E.a)(n)),n.handleClick=n.handleClick.bind(Object(E.a)(n)),n}return Object(b.a)(a,[{key:"handleClick",value:function(){var e=this.state.email;(0,this.props.loginDispatch)(e),this.setState({redirect:!0})}},{key:"handleChange",value:function(e){var t=this,a=e.target;this.setState(Object(p.a)({},a.name,a.value),(function(){return t.authenticator()}))}},{key:"authenticator",value:function(){var e=Object(m.a)(d.a.mark((function e(){var t,a,n,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.email,n=t.password,r=this.props.authDispatch,c=/^[a-z0-9_.]+@[a-z0-9]+\.[a-z]{2,3}(?:\.[a-z]{2})?$/,6,e.next=6,r(c.test(a)&&n.length>=6);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.redirect,c=this.props.canAuthenticate;return n?r.a.createElement(s.a,{to:"/carteira"}):r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"logo-div"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:O.a,alt:"trybe logo",className:"trybe"}),r.a.createElement("h1",{className:"wallet"},"wallet"))),r.a.createElement("form",{className:"forms-div"},r.a.createElement("h2",null,"Login"),r.a.createElement("label",{htmlFor:"email-input",className:"form-label"},"Email",r.a.createElement("input",{"data-testid":"email-input",type:"email",name:"email",className:"form-control",id:"email-input",value:t,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"password-input",className:"form-label"},"Senha",r.a.createElement("input",{"data-testid":"password-input",type:"password",name:"password",id:"password-input",className:"form-control",value:a,onChange:this.handleChange})),r.a.createElement("button",{type:"button",className:"btn btn-success",onClick:this.handleClick,disabled:!c},"ENTRAR")))}}]),a}(r.a.Component),j=Object(o.b)((function(e){return{canAuthenticate:e.user.canAuthenticate}}),(function(e){return{authDispatch:function(t){return e({type:"CAN_AUTHENTICATE",payload:t})},loginDispatch:function(t){return e({type:"LOGIN_ACTION",payload:t})}}}))(C),N=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).state={redirectHome:!1},e.sumTotal=e.sumTotal.bind(Object(E.a)(e)),e}return Object(b.a)(a,[{key:"sumTotal",value:function(){var e=this.props.expenses,t=0;return e.forEach((function(e){var a=e.value,n=e.currency,r=e.exchangeRates;t+=r[n].ask*a})),new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)}},{key:"render",value:function(){var e=this;if(this.state.redirectHome)return r.a.createElement(s.a,{to:"/"});var t=this.props,a=t.email,n=t.currency;return r.a.createElement("header",{className:"page-header"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:O.a,alt:"trybe logo",className:"trybe"}),r.a.createElement("h1",{className:"wallet"},"wallet")),r.a.createElement("div",{className:"column"},r.a.createElement("span",null,"Total: "),r.a.createElement("span",{"data-testid":"total-field"},this.sumTotal())),r.a.createElement("div",{className:"column"},r.a.createElement("span",null,"Moeda de convers\xe3o: "),r.a.createElement("span",{"data-testid":"header-currency-field"},n)),r.a.createElement("div",{className:"email-div"},r.a.createElement("h4",{"data-testid":"email-field"},a),r.a.createElement("button",{type:"button",onClick:function(){return e.setState({redirectHome:!0})},className:"btn btn-danger"},r.a.createElement("i",{className:"fas fa-sign-out-alt"}))))}}]),a}(r.a.Component);N.defaultProps={expenses:void 0,currency:void 0};var k=Object(o.b)((function(e){var t=e.user,a=e.wallet;return{email:t.email,currency:a.currency,total:a.total,expenses:a.expenses}}))(N),S={value:0,description:"",currency:"USD",method:"Dinheiro",tag:""},x=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).state=S,e.renderSelects=e.renderSelects.bind(Object(E.a)(e)),e.handleChange=e.handleChange.bind(Object(E.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(E.a)(e)),e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.fetcher)()}},{key:"handleChange",value:function(e){var t=e.target;this.setState(Object(p.a)({},t.name,t.value))}},{key:"handleSubmit",value:function(e){(0,this.props.fetcher)(),e.preventDefault();var t=this.props,a=t.addExpense,n=t.id;a(this.state,n),this.setState(S)}},{key:"renderSelects",value:function(){var e=this.state,t=e.method,a=e.tag;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"method-input"},"M\xe9todo de pagamento",r.a.createElement("select",{name:"method",id:"method-input",value:t,onChange:this.handleChange,className:"form-control"},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag-input"},"Tag",r.a.createElement("select",{name:"tag",id:"tag-input",value:a,onChange:this.handleChange,className:"form-control"},r.a.createElement("option",{value:"",disabled:!0}," "),r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade"))))}},{key:"render",value:function(){var e=this.props.currencieNames,t=this.state,a=t.value,n=t.description,c=t.currency;return r.a.createElement("form",{onSubmit:this.handleSubmit,className:"add expense-form"},r.a.createElement("label",{htmlFor:"value-input"},"Valor",r.a.createElement("input",{type:"number",name:"value",id:"value-input",value:a,onChange:this.handleChange,className:"form-control"})),r.a.createElement("label",{htmlFor:"desc-input"},"Descri\xe7\xe3o",r.a.createElement("input",{type:"text",name:"description",id:"desc-input",value:n,onChange:this.handleChange,className:"form-control"})),r.a.createElement("label",{htmlFor:"currency-input"},"Moeda",r.a.createElement("select",{name:"currency",id:"currency-input",value:c,onChange:this.handleChange,className:"form-control"},e&&e.filter((function(e){return"USDT"!==e})).map((function(e,t){return r.a.createElement("option",{key:t},e)})))),this.renderSelects(),r.a.createElement("button",{type:"submit",className:"btn btn-success"},"Adicionar despesa"))}}]),a}(r.a.Component);x.defaultProps={id:void 0,currencieNames:void 0};var w=Object(o.b)((function(e){var t=e.wallet;return{currencies:t.currencies,currencieNames:t.currencieNames,id:t.id}}),(function(e){return{fetcher:function(){return e(y())},addExpense:function(t,a){return e(function(e,t){return{type:"ADD_EXPENSE_ACTION",payload:{expense:e,id:t}}}(t,a))}}}))(x),T=["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Editar/Excluir"],A=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).handleClick=e.handleClick.bind(Object(E.a)(e)),e.formatCurrency=e.formatCurrency.bind(Object(E.a)(e)),e.renderButtons=e.renderButtons.bind(Object(E.a)(e)),e}return Object(b.a)(a,[{key:"handleClick",value:function(e,t){var a=this.props,n=a.removeExpense,r=a.selectExpenseAct;"delete"===e.name&&n(t),"edit"===e.name&&r(t)}},{key:"formatCurrency",value:function(e,t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"".concat(t)}).format(e)}},{key:"renderButtons",value:function(e,t){var a=this;return r.a.createElement("td",{className:"table-buttons"},r.a.createElement("button",{type:"button","data-testid":"edit-btn",name:"edit",onClick:function(t){var n=t.target;return a.handleClick(n,e)},className:"btn btn-warning"},r.a.createElement("span",{className:"far fa-edit"})),r.a.createElement("button",{type:"button",name:"delete","data-testid":"delete-btn",onClick:function(e){var n=e.target;return a.handleClick(n,t)},className:"btn btn-danger"},r.a.createElement("span",{className:"fas fa-backspace"})))}},{key:"render",value:function(){var e=this,t=this.props.expenses;return r.a.createElement("div",{className:"wallet-table"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,T.map((function(e){return r.a.createElement("th",{key:e,className:e},e)})))),r.a.createElement("tbody",null,t.map((function(t){var a=t.id,n=t.currency,c=t.description,l=t.tag,i=t.method,o=t.value,s=t.exchangeRates;return r.a.createElement("tr",{key:a},r.a.createElement("td",null,c),r.a.createElement("td",null,l),r.a.createElement("td",null,i),r.a.createElement("td",null,e.formatCurrency(o,n)),r.a.createElement("td",null,s[n].name.split("/")[0]),r.a.createElement("td",null,Number(s[n].ask).toFixed(2)),r.a.createElement("td",null,e.formatCurrency(Number(s[n].ask*o),"BRL")),r.a.createElement("td",null,"Real"),e.renderButtons(t,a))})))))}}]),a}(n.Component),D=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{removeExpense:function(t){return e({type:"REMOVE_EXPENSE_ACTION",payload:t})},selectExpenseAct:function(t){return e({type:"SELECT_EXPENSE",payload:t})}}}))(A),R=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(h.a)(this,a);var r=(n=t.call(this,e)).props.selectedExpense,c=r.id,l=r.method,i=r.tag,o=r.value,s=r.description,u=r.currency;return n.state={id:c,method:l,tag:i,value:o,description:s,currency:u},n.handleChange=n.handleChange.bind(Object(E.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(E.a)(n)),n.renderSelects=n.renderSelects.bind(Object(E.a)(n)),n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.fetcher)()}},{key:"handleChange",value:function(e){var t=e.target;this.setState(Object(p.a)({},t.name,t.value))}},{key:"handleSubmit",value:function(e){var t=this.state.id;e.preventDefault(),(0,this.props.edit)(this.state,t)}},{key:"renderSelects",value:function(){var e=this.state,t=e.method,a=e.tag;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"method-input"},"M\xe9todo de pagamento",r.a.createElement("select",{name:"method",id:"method-input",value:t,"data-testid":"method-input",className:"form-control",onChange:this.handleChange},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag-input"},"Tag",r.a.createElement("select",{name:"tag",id:"tag-input","data-testid":"tag-input",value:a,onChange:this.handleChange,className:"form-control"},r.a.createElement("option",{value:"",disabled:!0}," "),r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade"))))}},{key:"render",value:function(){var e=this.props.currencieNames,t=this.state,a=t.value,n=t.description,c=t.currency;return r.a.createElement("form",{onSubmit:this.handleSubmit,className:"edit expense-form"},r.a.createElement("label",{htmlFor:"value-input"},"Valor",r.a.createElement("input",{type:"number","data-testid":"value-input",name:"value",id:"value-input",value:a,onChange:this.handleChange,className:"form-control"})),r.a.createElement("label",{htmlFor:"desc-input"},"Descri\xe7\xe3o",r.a.createElement("input",{type:"text",name:"description",id:"desc-input","data-testid":"description-input",value:n,onChange:this.handleChange,className:"form-control"})),r.a.createElement("label",{htmlFor:"currency-input"},"Moeda",r.a.createElement("select",{name:"currency",id:"currency-input",value:c,"data-testid":"currency-input",onChange:this.handleChange,className:"form-control"},e&&e.filter((function(e){return"USDT"!==e})).map((function(e,t){return r.a.createElement("option",{key:t},e)})))),this.renderSelects(),r.a.createElement("button",{type:"submit",className:"btn btn-warning"},"Editar despesa"))}}]),a}(n.Component);R.defaultProps={currencieNames:void 0};var _=Object(o.b)((function(e){var t=e.wallet;return{selectedExpense:t.selected,currencieNames:t.currencieNames}}),(function(e){return{fetcher:function(){return e(y())},edit:function(t,a){return e(function(e,t){return{type:"EDIT_EXPENSE",payload:{id:t,expense:e}}}(t,a))}}}))(R),I=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props.status;return r.a.createElement("div",null,r.a.createElement(k,null),"add"===e&&r.a.createElement(w,null),"edit"===e&&r.a.createElement(_,null),r.a.createElement(D,null))}}]),a}(r.a.Component);I.defaultProps={status:void 0};var F=Object(o.b)((function(e){return{status:e.wallet.status}}))(I);var M=function(){return r.a.createElement("main",null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/carteira",component:F}),r.a.createElement(s.b,{exact:!0,path:"/",component:j})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=a(14),P=a(32),B=a(33),U=a(28),z=a(2),V={id:0,currencies:[],currencieNames:[],expenses:[],currency:"BRL",loading:!1,selected:null,status:"add"},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_CURRENCIES":return Object(z.a)(Object(z.a)({},e),{},{loading:!0});case"RECEIVE_REQUEST":return Object(z.a)(Object(z.a)({},e),{},{currencieNames:Object.keys(t.payload),currencies:t.payload,loading:!1});case"ADD_EXPENSE_ACTION":return Object(z.a)(Object(z.a)({},e),{},{id:e.id+1,expenses:[].concat(Object(U.a)(e.expenses),[Object(z.a)(Object(z.a)({id:t.payload.id},t.payload.expense),{},{exchangeRates:e.currencies})])});case"REMOVE_EXPENSE_ACTION":return Object(z.a)(Object(z.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.payload}))});case"SELECT_EXPENSE":return Object(z.a)(Object(z.a)({},e),{},{selected:t.payload,status:"edit"});case"EDIT_EXPENSE":return Object(z.a)(Object(z.a)({},e),{},{selected:null,status:"add",expenses:[].concat(Object(U.a)(e.expenses.filter((function(e){return e.id!==t.payload.id}))),[Object(z.a)(Object(z.a)({id:t.payload.id},t.payload.expense),{},{exchangeRates:e.currencies})]).sort((function(e,t){return e.id-t.id}))});default:return e}},H={email:"",canAuthenticate:!1},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CAN_AUTHENTICATE":return Object(z.a)(Object(z.a)({},e),{},{canAuthenticate:t.payload});case"LOGIN_ACTION":return Object(z.a)(Object(z.a)({},e),{},{email:t.payload});default:return e}},W=Object(L.combineReducers)({user:Q,wallet:X}),G=Object(L.createStore)(W,Object(B.composeWithDevTools)(Object(L.applyMiddleware)(P.a)));l.a.render(r.a.createElement(i.a,null,r.a.createElement(o.a,{store:G},r.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.2aab2815.chunk.js.map